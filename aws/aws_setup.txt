(on instance)
wget https://julialang.s3.amazonaws.com/bin/linux/x64/0.5/julia-0.5.0-linux-x86_64.tar.gz
tar -xvzf julia-0.5.0-linux-x86_64.tar.gz
echo "export PATH=\$PATH:$HOME/julia-3c9d75391c/bin" >> ~/.bashrc

(on local)
scp -i ~/oct7test.pem mosek.lic ubuntu@ec2-107-20-52-113.compute-1.amazonaws.com:
scp -i ~/oct7test.pem scipoptsuite-3.2.1.tgz ubuntu@ec2-54-158-166-128.compute-1.amazonaws.com:
scp -i ~/oct7test.pem cplex_studio127.linux-x86-64.bin ubuntu@ec2-54-158-166-128.compute-1.amazonaws.com:

(on instance)
wget http://download.mosek.com/stable/8.0.0.53/mosektoolslinux64x86.tar.bz2
tar -xvjf mosektoolslinux64x86.tar.bz2
mv mosek.lic mosek
chmod +x cplex_studio127.linux-x86-64.bin
./cplex_studio127.linux-x86-64.bin
# install to /home/ubuntu/CPLEX_Studio127
echo "export LD_LIBRARY_PATH=/home/ubuntu/CPLEX_Studio127/cplex/bin/x86-64_linux" >> ~/.bashrc

(to compile scip for scip.jl)
tar xvzf scipoptsuite-3.2.1.tgz
cd scipoptsuite-3.2.1
rm Makefile.doit
wget http://scip.zib.de/download/bugfixes/scip-3.2.1/Makefile.doit
make SHARED=true GMP=false READLINE=false ZLIB=false OPT=opt IPOPT=true scipoptlib

> Enter soft-link ...
[Press enter]
> Enter soft-link target file or directory for "lib/ipopt.linux.x86_64.gnu.opt" (return if not needed):
/home/ubuntu/.julia/v0.5/Ipopt/deps/usr

echo "export SCIPOPTDIR=/home/ubuntu/scipoptsuite-3.2.1" >> ~/.bashrc

sudo apt-get update
sudo apt-get install sdpa libopenblas-dev

# now we need another copy of SCIP for SCIP-SDP
mkdir sdp
cd sdp
tar xvzf ../scipoptsuite-3.2.1.tgz
cd scipoptsuite-3.2.1
make scipoptlib
cd ..

wget https://sourceforge.net/projects/sdpa/files/sdpa/sdpa_7.3.8.tar.gz
tar xvzf sdpa_7.3.8.tar.gz
cd sdpa-7.3.8
./configure --prefix=$HOME/sdpa.7.3.8 --with-blas="/usr/lib/libopenblas.a" --with-lapack="/usr/lib/libopenblas.a"
make
make install

wget http://www.opt.tu-darmstadt.de/scipsdp/downloads/scipsdp-2.1.0.tgz
tar xvzf ../scipsdp-2.1.0.tgz
cd scipsdp-2.1.0
mkdir lib
cd lib
ln -s /home/ubuntu/sdp/scipoptsuite-3.2.1/scip-3.2.1 scip
cd ..
make SDPS=sdpa

> Enter soft-link target file or directory for "lib/sdpainc" (return if not needed): 
> /home/ubuntu/sdpa.7.3.8/include

> Enter soft-link target file or directory for "lib/libsdpa.a" (return if not needed): 
> /home/ubuntu/sdpa.7.3.8/lib/libsdpa.a

> Enter soft-link target file or directory for "lib/libsdpa.so" (return if not needed): 
>

> Enter soft-link target file or directory for "lib/mumpsinc" (return if not needed): 
> /home/ubuntu/sdp/sdpa-7.3.8/mumps/build/include

> Enter soft-link target file or directory for "lib/mumpslib" (return if not needed): 
> /home/ubuntu/sdp/sdpa-7.3.8/mumps/build/lib

> Enter soft-link target file or directory for "lib/mumpslibseq" (return if not needed): 
> /home/ubuntu/sdp/sdpa-7.3.8/mumps/build/libseq

> Enter soft-link target file or directory for "lib/libopenblas.so.0" (return if not needed): 
> /usr/lib/libopenblas.so.0

make SDPS=sdpa test

cd
source .bashrc

sudo apt-get update
sudo apt-get -y install build-essential gfortran pkg-config unzip libgmp-dev libz-dev libreadline-dev libncurses-dev
julia-3c9d75391c/bin/julia
Pkg.add("Mosek")
Pkg.add("CPLEX")
Pkg.add("JuMP")
Pkg.add("Convex")
Pkg.add("ECOS")
Pkg.add("Cbc")
Pkg.add("Ipopt")
Pkg.add("CoinOptServices")
Pkg.add("AmplNLWriter")
Pkg.add("SCS") # for Pajarito tests
Pkg.add("GLPKMathProgInterface") # for Pajarito tests
Pkg.add("SCIP")
Pkg.clone("https://github.com/mlubin/ConicBenchmarkUtilities.jl.git")
Pkg.add("Pajarito")
# confirm everything is working by running
Pkg.test("Pajarito")

# tidy up to reduce size of AMI
rm -rf .julia/v0.5/CoinOptServices/deps/src
rm -rf .julia/v0.5/Cbc/deps/src/
rm -rf .julia/v0.5/Ipopt/deps/src/

git clone https://github.com/mlubin/PajaritoSupplement.git
